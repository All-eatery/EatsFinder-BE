generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("ENV_DATABASE_URL")
}

model Categories {
  code   String?  @db.VarChar(6)
  name   String   @db.VarChar(6)
  type   String?  @db.VarChar(6)
  id     BigInt   @id @default(autoincrement())
  places places[]

  @@map("categories")
}

model Comments {
  createdAt DateTime  @map("created_at") @db.Timestamp(6)
  deletedAt DateTime? @map("deleted_at") @db.Timestamp(6)
  id        BigInt    @id @default(autoincrement())
  postId    BigInt    @map("post_id")
  updatedAt DateTime  @map("updated_at") @db.Timestamp(6)
  userId    BigInt    @map("user_id")
  content   String    @db.Text
  users     Users     @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK8omq0tc18jd43bu5tjh6jvraq")
  posts     Posts     @relation(fields: [postId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FKh4c7lvsc298whoyd4w9ta25cr")

  @@index([userId], map: "FK8omq0tc18jd43bu5tjh6jvraq")
  @@index([postId], map: "FKh4c7lvsc298whoyd4w9ta25cr")
  @@map("comments")
}

model EmailVerifications {
  complete   Boolean
  createdAt  DateTime @map("created_at") @db.Timestamp(6)
  expired_at DateTime @db.Timestamp(6)
  id         BigInt   @id @default(autoincrement())
  code       String   @db.VarChar(10)
  email      String   @db.VarChar(30)

  @@map("email_verifications")
}

model Follows {
  createdAt                          DateTime @map("created_at") @db.DateTime(6)
  followedUserId                     BigInt   @map("followed_user_id")
  followingUserId                    BigInt   @map("following_user_id")
  id                                 BigInt   @id @default(autoincrement())
  usersFollowsFollowedUserIdTousers  Users    @relation("follows_followed_user_idTousers", fields: [followedUserId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FKfg3bo4whthco31ewoiaxpjhvi")
  usersFollowsFollowingUserIdTousers Users    @relation("follows_following_user_idTousers", fields: [followingUserId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FKk1b1yn6h0224kelm91qetqxen")

  @@index([followedUserId], map: "FKfg3bo4whthco31ewoiaxpjhvi")
  @@index([followingUserId], map: "FKk1b1yn6h0224kelm91qetqxen")
  @@map("follows")
}

model LikesByPosts {
  id     BigInt @id @default(autoincrement())
  postId BigInt @map("post_id")
  userId BigInt @map("user_id")
  users  Users  @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK81m3sbgvf0vhy7lgufppa4o5")
  posts  Posts  @relation(fields: [postId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FKlcd6fjflxlit9llbxrmha8bfw")

  @@index([userId], map: "FK81m3sbgvf0vhy7lgufppa4o5")
  @@index([postId], map: "FKlcd6fjflxlit9llbxrmha8bfw")
  @@map("likes_by_posts")
}

model Posts {
  isOwner                               Boolean        @map("is_owner")
  likeCount                             Int            @default(0) @map("like_count")
  createdAt                             DateTime       @map("created_at") @db.Timestamp(6)
  deletedAt                             DateTime?      @map("deleted_at") @db.Timestamp(6)
  id                                    BigInt         @id @default(autoincrement())
  keyword_id                            BigInt?
  place_id                              BigInt
  ratingId                              BigInt         @map("rating_id")
  updatedAt                             DateTime       @map("updated_at") @db.Timestamp(6)
  userId                                BigInt         @map("user_id")
  content                               String?        @db.Text
  imageUrl                              String?        @map("image_url") @db.Text
  menu_tag                              String?        @db.Text
  thumbnail_url                         String         @db.Text
  comments                              Comments[]
  likesByPosts                          LikesByPosts[]
  users                                 Users          @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK5lidm6cqbc7u4xhqpxm898qme")
  post_keywords                         post_keywords? @relation(fields: [keyword_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FKalrk2f4mefrfx07rjwcheb1jw")
  starRatingsPostsRatingIdTostarRatings StarRatings    @relation("posts_rating_idTostar_ratings", fields: [ratingId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FKonikjcopg9sp7kb852mjrxioj")
  places                                places         @relation(fields: [place_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FKt38bd81etfla6c1ilk3s0wm45")
  starRatingsStarRatingsPostIdToposts   StarRatings[]  @relation("star_ratings_post_idToposts")

  @@index([userId], map: "FK5lidm6cqbc7u4xhqpxm898qme")
  @@index([ratingId], map: "FKonikjcopg9sp7kb852mjrxioj")
  @@index([keyword_id], map: "FKalrk2f4mefrfx07rjwcheb1jw")
  @@index([place_id], map: "FKt38bd81etfla6c1ilk3s0wm45")
  @@map("posts")
}

model StarRatings {
  star                            Float   @db.Float
  id                              BigInt  @id @default(autoincrement())
  postId                          BigInt  @map("post_id")
  postsPostsRatingIdTostarRatings Posts[] @relation("posts_rating_idTostar_ratings")
  postsStarRatingsPostIdToposts   Posts   @relation("star_ratings_post_idToposts", fields: [postId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FKo6usan40orj7ig5w3t8udpqkx")

  @@index([postId], map: "FKo6usan40orj7ig5w3t8udpqkx")
  @@map("star_ratings")
}

model Users {
  follower_count                       Int             @default(0)
  following_count                      Int             @default(0)
  createdAt                            DateTime        @map("created_at") @db.Timestamp(6)
  deletedAt                            DateTime?       @map("deleted_at") @db.Timestamp(6)
  id                                   BigInt          @id @default(autoincrement())
  updatedAt                            DateTime        @map("updated_at") @db.Timestamp(6)
  name                                 String          @db.VarChar(10)
  nickname                             String          @unique(map: "UK2ty1xmrrgtn89xt7kyxx6ta7h") @db.VarChar(10)
  phoneNumber                          String?         @map("phone_number") @db.VarChar(15)
  email                                String          @db.VarChar(30)
  password                             String          @db.Text
  profileImage                         String?         @map("profile_image") @db.Text
  role                                 UsersRole
  socialType                           UsersSocialType @map("social_type")
  status                               UsersStatus
  comments                             Comments[]
  followsFollowsFollowedUserIdTousers  Follows[]       @relation("follows_followed_user_idTousers")
  followsFollowsFollowingUserIdTousers Follows[]       @relation("follows_following_user_idTousers")
  likesByPosts                         LikesByPosts[]
  posts                                Posts[]

  @@map("users")
}

model places {
  x            Float      @db.Float
  y            Float      @db.Float
  category_id  BigInt
  created_at   DateTime   @db.Timestamp(6)
  deleted_at   DateTime?  @db.Timestamp(6)
  id           BigInt     @id @default(autoincrement())
  updated_at   DateTime   @db.Timestamp(6)
  telephone    String?    @db.VarChar(15)
  name         String     @db.VarChar(100)
  address      String     @db.Text
  road_address String?    @db.Text
  categories   Categories @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FKca17w9kt9f18v0lr91ssmivx5")
  posts        Posts[]

  @@index([category_id], map: "FKca17w9kt9f18v0lr91ssmivx5")
}

model post_keywords {
  id       BigInt  @id @default(autoincrement())
  category String  @db.VarChar(10)
  reaction String  @db.VarChar(15)
  posts    Posts[]
}

enum UsersSocialType {
  GOOGLE
  KAKAO
  LOCAL
  NAVER

  @@map("users_social_type")
}

enum UsersRole {
  ADMIN
  OWNER
  USER

  @@map("users_role")
}

enum UsersStatus {
  AWAIT
  BAN
  NORMAL

  @@map("users_status")
}
